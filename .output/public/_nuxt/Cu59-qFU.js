import{V as W,_ as Y,b as G,c as K}from"./DX7FhTPu.js";import{d as A,r as R,o as U,t as X,P as Z,ae as k,aj as $,v as L,A as _,z as a,x as h,ag as P,y as z,V as F,M as D,I as H,R as E,a3 as ee,ac as te,T as S,j as d,Q as ae,a6 as C,J as le,as as oe,e as ne,N as se,at as re,au as ie,_ as ue,B as I}from"./DdX6Kkz_.js";import{B as ce,z as de,x as B,c as ve,t as me,l as fe,n as ge,L as _e,j as N,h as he,o as be,q as ye,w as xe,A as pe}from"./t18BpZc7.js";import{u as M,c as q,m as J}from"./CAQ2CxwN.js";import{u as Se,m as Te,V as Ve,_ as ke,a as Be}from"./BAfJIyOa.js";import{u as we}from"./BrggjM0y.js";import"./CFBvynM1.js";const Ce=Symbol.for("nuxt:client-only"),He=A({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:o,attrs:t}){const r=R(!1);return U(()=>{r.value=!0}),Z(Ce,!0),n=>{var m;if(r.value)return(m=o.default)==null?void 0:m.call(o);const l=o.fallback||o.placeholder;if(l)return l();const c=n.fallback||n.placeholder||"",i=n.fallbackTag||n.placeholderTag||"span";return X(i,t,c)}}}),Pe={class:"rounded-lg w-8 h-8 border-[1.5px] border-primary overflow-hidden"},Ie=["src"],Ne={class:"flex flex-col max-w-[150px] truncate justify-start items-start"},Ee={class:"ml-2 mb-0.5"},Ae={class:"text-[0.45rem] text-gray-500 ml-2 mb-0.5 truncate"},Re=A({__name:"State",setup(e){const{user:o,avatarUrl:t}=ce();return U(async()=>{await de()}),k(()=>o.value.avatar,r=>{console.log("Avatar changed to:",r)}),(r,n)=>{const l=He,c=Y;return L(),$(W,{text:"点击：编辑用户信息",location:"bottom"},{activator:_(({props:i})=>[a(B,F({class:"px-1",variant:"text"},i),{default:_(()=>[a(l,null,{default:_(()=>[h("div",Pe,[h("img",{src:P(t),alt:"avatar"},null,8,Ie)])]),_:1}),h("div",Ne,[h("span",Ee,z(P(o).name),1),h("span",Ae,z(P(o).id),1)]),a(c)]),_:2},1040)]),_:1})}}}),Ue=H({text:String,...J(),...q()},"VToolbarTitle"),$e=D()({name:"VToolbarTitle",props:Ue(),setup(e,o){let{slots:t}=o;return M(()=>{const r=!!(t.default||t.text||e.text);return a(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var n;return[r&&a("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(n=t.default)==null?void 0:n.call(t)])]}})}),{}}}),Le=[null,"prominent","default","comfortable","compact"],Q=H({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Le.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...xe(),...J(),...ye(),...be(),...q({tag:"header"}),...le()},"VToolbar"),O=D()({name:"VToolbar",props:Q(),setup(e,o){var b;let{slots:t}=o;const{backgroundColorClasses:r,backgroundColorStyles:n}=ve(E(e,"color")),{borderClasses:l}=me(e),{elevationClasses:c}=fe(e),{roundedClasses:i}=ge(e),{themeClasses:m}=ee(e),{rtlClasses:T}=te(),v=S(!!(e.extended||(b=t.extension)!=null&&b.call(t))),f=d(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),x=d(()=>v.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ae({VBtn:{variant:"text"}}),M(()=>{var w;const u=!!(e.title||t.title),g=!!(t.image||e.image),p=(w=t.extension)==null?void 0:w.call(t);return v.value=!!(e.extended||p),a(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},r.value,l.value,c.value,i.value,m.value,T.value,e.class],style:[n.value,e.style]},{default:()=>[g&&a("div",{key:"image",class:"v-toolbar__image"},[t.image?a(N,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):a(_e,{key:"image-img",cover:!0,src:e.image},null)]),a(N,{defaults:{VTabs:{height:C(f.value)}}},{default:()=>{var s,y,V;return[a("div",{class:"v-toolbar__content",style:{height:C(f.value)}},[t.prepend&&a("div",{class:"v-toolbar__prepend"},[(s=t.prepend)==null?void 0:s.call(t)]),u&&a($e,{key:"title",text:e.title},{text:t.title}),(y=t.default)==null?void 0:y.call(t),t.append&&a("div",{class:"v-toolbar__append"},[(V=t.append)==null?void 0:V.call(t)])])]}}),a(N,{defaults:{VTabs:{height:C(x.value)}}},{default:()=>[a(he,null,{default:()=>[v.value&&a("div",{class:"v-toolbar__extension",style:{height:C(x.value)}},[p])]})]})]})}),{contentHeight:f,extensionHeight:x}}}),De=H({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Me(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=o;let r=0,n=0;const l=R(null),c=S(0),i=S(0),m=S(0),T=S(!1),v=S(!1),f=d(()=>Number(e.scrollThreshold)),x=d(()=>oe((f.value-c.value)/f.value||0)),b=()=>{const u=l.value;if(!u||t&&!t.value)return;r=c.value,c.value="window"in u?u.pageYOffset:u.scrollTop;const g=u instanceof Window?document.documentElement.scrollHeight:u.scrollHeight;if(n!==g){n=g;return}v.value=c.value<r,m.value=Math.abs(c.value-f.value)};return k(v,()=>{i.value=i.value||c.value}),k(T,()=>{i.value=0}),U(()=>{k(()=>e.scrollTarget,u=>{var p;const g=u?document.querySelector(u):window;g&&g!==l.value&&((p=l.value)==null||p.removeEventListener("scroll",b),l.value=g,l.value.addEventListener("scroll",b,{passive:!0}))},{immediate:!0})}),ne(()=>{var u;(u=l.value)==null||u.removeEventListener("scroll",b)}),t&&k(t,b,{immediate:!0}),{scrollThreshold:f,currentScroll:c,currentThreshold:m,isScrollActive:T,scrollRatio:x,isScrollingUp:v,savedScroll:i}}const je=H({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Q(),...Te(),...De(),height:{type:[Number,String],default:64}},"VAppBar"),ze=D()({name:"VAppBar",props:je(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:t}=o;const r=R(),n=se(e,"modelValue"),l=d(()=>{var y;const s=new Set(((y=e.scrollBehavior)==null?void 0:y.split(" "))??[]);return{hide:s.has("hide"),fullyHide:s.has("fully-hide"),inverted:s.has("inverted"),collapse:s.has("collapse"),elevate:s.has("elevate"),fadeImage:s.has("fade-image")}}),c=d(()=>{const s=l.value;return s.hide||s.fullyHide||s.inverted||s.collapse||s.elevate||s.fadeImage||!n.value}),{currentScroll:i,scrollThreshold:m,isScrollingUp:T,scrollRatio:v}=Me(e,{canScroll:c}),f=d(()=>l.value.hide||l.value.fullyHide),x=d(()=>e.collapse||l.value.collapse&&(l.value.inverted?v.value>0:v.value===0)),b=d(()=>e.flat||l.value.fullyHide&&!n.value||l.value.elevate&&(l.value.inverted?i.value>0:i.value===0)),u=d(()=>l.value.fadeImage?l.value.inverted?1-v.value:v.value:void 0),g=d(()=>{var V,j;if(l.value.hide&&l.value.inverted)return 0;const s=((V=r.value)==null?void 0:V.contentHeight)??0,y=((j=r.value)==null?void 0:j.extensionHeight)??0;return f.value?i.value<m.value||l.value.fullyHide?s+y:s:s+y});re(d(()=>!!e.scrollBehavior),()=>{ie(()=>{f.value?l.value.inverted?n.value=i.value>m.value:n.value=T.value||i.value<m.value:n.value=!0})});const{ssrBootStyles:p}=we(),{layoutItemStyles:w}=Se({id:e.name,order:d(()=>parseInt(e.order,10)),position:E(e,"location"),layoutSize:g,elementSize:S(void 0),active:n,absolute:E(e,"absolute")});return M(()=>{const s=O.filterProps(e);return a(O,F({ref:r,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...w.value,"--v-toolbar-image-opacity":u.value,height:void 0,...p.value},e.style]},s,{collapse:x.value,flat:b.value}),t)}),{}}}),Oe={},Fe={class:"app-bar"};function qe(e,o){const t=G,r=K,n=Re;return L(),$(ze,{elevation:0,class:"!border-b-[1px] !border-gray-600/60",height:"54"},{default:_(()=>[h("div",Fe,[a(B,{active:!1,exact:!1,class:"mr-0 !h-12",to:"/",variant:"text"},{default:_(()=>[a(t,{alt:"site-icon",height:"28",src:"/site_icon.svg",width:"28"})]),_:1}),a(B,{to:"/"},{default:_(()=>o[0]||(o[0]=[I(" 起点 ")])),_:1}),a(B,{to:"/cards_wiki"},{default:_(()=>o[1]||(o[1]=[I(" 卡牌 ")])),_:1}),a(B,{to:"/make_cards"},{default:_(()=>o[2]||(o[2]=[I(" 制作牌组 ")])),_:1}),a(pe),a(r),a(n)])]),_:1})}const Je=ue(Oe,[["render",qe],["__scopeId","data-v-50f70815"]]),et=A({name:"DefaultLayout",__name:"default",setup(e){return(o,t)=>{const r=Je,n=ke;return L(),$(Ve,null,{default:_(()=>[a(r),t[0]||(t[0]=h("div",{class:"decorations absolute top-0 left-0 right-0 w-full h-full flex pointer-events-none"},[h("div",{class:"decoration"}),h("div",{class:"grow"}),h("div",{class:"decoration"})],-1)),a(Be,{style:{"padding-top":"54px"}},{default:_(()=>[a(n)]),_:1})]),_:1})}}});export{et as default};
